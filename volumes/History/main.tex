\documentclass{article}
\usepackage[a4paper,margin=1in]{geometry}
\usepackage{tikz}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\pagestyle{empty}

\usepackage{xfp}
\usepackage{xparse}
\usetikzlibrary{calc}

% Creates a timline to ilustrade history
% There are a number of concepts used that needs to be understood in order to use the environment:
% - Polity: are the rectangular parts of the time line;
% - Influence: the width of the rectangle, i.e., how large of an influence a polity has;
% - Event: is shown as a discrive text of a polity, used for something significant that happend to a polity;
% - Split: a polity can split into different parts that becomes different politys;
% - Deviation: a polity that comes from another polity;
% - Connection: dotted lines that connect politys;
% - Period: opaque rectangle that encompasses several politys;
% - Regions: shown as title columns used for the geograpical areas that the polity roams.
\newsavebox{\tllabelbox}
\newlength{\tlhorizontallinewidth}
\newlength{\tllabelwidth}
\NewDocumentEnvironment{timeline}{O{\textwidth} O{24} O{250} O{-3000} O{2025}}{% width, height, year step, start year, end year
  % Abrivations used:
  % - tl: timeline.

  % Begin group
  \begingroup

  % Local variables
  \def\tlwidth{#1}%
  \def\tlheight{#2}%
  \def\tlyearstep{#3}%
  \def\tlstart{#4}%
  \def\tlend{#5}%
  \pgfmathtruncatemacro{\tlsecondstep}{\tlstart + \tlyearstep}
  \pgfmathtruncatemacro{\numticks}{(\tlend - \tlstart)/\tlyearstep}

  \savebox{\tllabelbox}{\shortstack{\small9999\\\tiny~BCE}}
  \setlength{\tlhorizontallinewidth}{\tlwidth}
  \setlength{\tllabelwidth}{\wd\tllabelbox}
  \addtolength{\tlhorizontallinewidth}{-\wd\tllabelbox}

  \noindent
  \begin{tikzpicture}[trim left=0pt, trim right=0pt]
  
  % Vertical axis
  \draw[very thick] (0,0) -- (0,\tlheight);

  % Loop from i = 0 to numticks
  \foreach \i in {0,...,\numticks} {
  % Compute current year
  \pgfmathtruncatemacro{\year}{\tlstart + \i * \tlyearstep}

  % Calculate position (float)
  \pgfmathsetmacro{\pos}{(\tlend - \year)/(\tlend - \tlstart) * \tlheight}

   Only draw if pos is inside the bounds
  \pgfmathparse{(\pos >= 0) && (\pos <= \tlheight)}
  \ifnum\pgfmathresult>0
    % Prepare label
    \pgfmathtruncatemacro{\absyear}{abs(\year)}
    \ifnum\year<0
      \def\labeltext{\shortstack{\small\absyear\\\tiny~BCE}}
    \else
      \def\labeltext{\shortstack{\small\absyear\\\tiny~CE}}
    \fi

    \draw[gray] (0,\pos) -- (\tlhorizontallinewidth,\pos) node[inner sep=0pt, outer sep=0pt, anchor=west, text width=\tllabelwidth, align=right] {\labeltext};
  \fi
  }

  % A period the object with constant influence
  \def\timelineevent##1##2##3##4##5{% year start, year end, width, name, distance from left line
    \pgfmathsetmacro{\ystart}{(\tlend - ##1)/(\tlend - \tlstart) * \tlheight}
    \pgfmathsetmacro{\yend}{(\tlend - ##2)/(\tlend - \tlstart) * \tlheight}
    \pgfmathsetmacro{\ytext}{(\ystart + \yend)/2}
    \pgfmathsetmacro{\xtext}{##5 + (##3/2)}

    \draw[fill=yellow!50] (##5,\ystart) rectangle (##5+##3,\yend);
    \node[rotate=90] at (\xtext,\ytext) {##4};
  }%

  % A period of change of the object influence
  \def\timelineeventinfluencechange##1##2##3##4##5{% year start, year end, start width, end width, start distance from left line
    \pgfmathsetmacro{\ystart}{(\tlend - ##1)/(\tlend - \tlstart) * \tlheight}
    \pgfmathsetmacro{\yend}{(\tlend - ##2)/(\tlend - \tlstart) * \tlheight}
    \pgfmathsetmacro{\xbottomstart}{##5 + (##3-##4)/2}

    \filldraw[fill=blue!30]
      (##5,\ystart) -- (##5+##3,\ystart)
      -- (\xbottomstart + ##4,\yend) -- (\xbottomstart,\yend)
      -- cycle;
  }%

  \def\timelineeventsplit##1##2##3##4##5##6##7{% year start, year end, start width, left width, right width, start distance from left line, distance between left and right
    \pgfmathsetmacro{\ystart}{(\tlend - ##1)/(\tlend - \tlstart) * \tlheight}
    \pgfmathsetmacro{\yend}{(\tlend - ##2)/(\tlend - \tlstart) * \tlheight}
    \pgfmathsetmacro{\xmiddle}{##6+##3/2}
    \pgfmathsetmacro{\xleftbottomstart}{\xmiddle-##7/2-##4}
    \pgfmathsetmacro{\xrightbottomstart}{\xmiddle+##7/2}

    \filldraw[fill=blue!30] % Left part of split
      (##6,\ystart) -- (\xmiddle,\ystart)
      -- (\xleftbottomstart + ##4,\yend) -- (\xleftbottomstart,\yend)
      -- cycle;
    \filldraw[fill=blue!30] % Right part of split
      (\xmiddle,\ystart) -- (##6+##3,\ystart)
      -- (\xrightbottomstart + ##5,\yend) -- (\xrightbottomstart,\yend)
      -- cycle;
  }%

  % TODO: deviation, i.e., the main line continues and there is one diviation
  % TODO: connection, i.e., a doted line where you define start and end position
  % TODO: period, i.e., a rectangel of afected events from start to end year, with a descpription
  % TODO: descoveries, e.g., paper printing press..

}
{%
  \end{tikzpicture}
  \endgroup % End local scope
}

\begin{document}
%https://usefulcharts.com/products/timeline-of-world-history?srsltid=AfmBOopS9m5ZgO2ZgwRIQmrdXolLk8MB2rmKRCYCXRPoW1JgQ21a_9G0


\section{Oveview of World History}

\newpage
\begin{timeline}[\textwidth][24][250][-3300][2025]
  \timelineevent{-3000}{-1000}{1}{\tiny Ancient Egypt}{1}
  \timelineevent{1760}{1840}{1}{\tiny Industrial Rev.}{6}
\end{timeline}

\section{World Pre-Bronze Age}

\section{European and Middle Eastern Bronze Age}

\section{European and Middle Eastern Classic Antiquity}

%\newpage
%\begin{timeline}[\textwidth][\textheight][50][-600][500]
%
%  % Roman empire
%  \timelineevent{-600}{-250}{0.5}{\tiny Roman Kingdom}{3+1.5/2+1/2}
%  \timelineeventinfluencechange{-270}{-250}{0.5}{1.5}{3+1.5/2+1/2}
%  \timelineevent{-250}{-40}{1.5}{\small Roman Republic}{3+1.5/2}
%  \timelineeventinfluencechange{-40}{-20}{1.5}{3}{3+1.5/2}
%  \timelineevent{-20}{280}{3}{Roman Empire}{3}
%  \timelineeventsplit{280}{300}{3}{1}{1}{3}{2}
%  \timelineevent{300}{480}{1}{Western Empire}{2.5}
%  \timelineevent{300}{500}{1}{Eastern Empire}{5.5}
%
%\end{timeline}


\section{European Dark Ages}

\section{European Renesance}

\section{Americas Pre-Colonalisation}

\section{Sub-sahara Pre-Colonalisation}

\section{World Colonalisation and Pre-industrialistation}

\section{World Industrialization and End of Colonalism}

\section{World Technological Age}

\section{Oceania Pre-Colonialisation}


\end{document}

